# アコーディオンのテンプレ

タイプ: スニペット

## 利用シーン（あれば画像）

## コード

```html
<!-- アコーディオンコンテナ -->
<div class="accordionContainer">
  <!-- アコーディオン項目 1 -->
  <details class="accordion" name="faqGroup">
    <summary class="accordion__summary">
      <span class="accordion__title">質問タイトル1</span>
      <!-- 🎨 アイコン変更可能: +, ▼, >, など -->
      <span class="accordion__icon" aria-hidden="true">+</span>
    </summary>
    <div class="accordion__content">
      <div class="accordion__content-inner">
        <p>回答内容1。ここに詳細な説明を記載します。</p>
      </div>
    </div>
  </details>

  <!-- アコーディオン項目 2 -->
  <details class="accordion" name="faqGroup">
    <summary class="accordion__summary">
      <span class="accordion__title">質問タイトル2</span>
      <!-- 🎨 アイコンは統一してください -->
      <span class="accordion__icon" aria-hidden="true">+</span>
    </summary>
    <div class="accordion__content">
      <div class="accordion__content-inner">
        <p>回答内容2。複数の段落も可能です。</p>
        <p>追加の段落もここに記載できます。</p>
      </div>
    </div>
  </details>

  <!-- アコーディオン項目 3 -->
  <details class="accordion" name="faqGroup">
    <summary class="accordion__summary">
      <span class="accordion__title">質問タイトル3</span>
      <span class="accordion__icon" aria-hidden="true">+</span>
    </summary>
    <div class="accordion__content">
      <div class="accordion__content-inner">
        <p>回答内容3。HTMLタグも使用可能です。<strong>太字</strong>や<em>斜体</em>なども。</p>
      </div>
    </div>
  </details>

  <!-- 📝 必要に応じてアコーディオン項目を追加 -->
</div>
```

```jsx
/* ===============================================
 * アコーディオン
 =============================================== */

.accordionContainer {
  max-width: 800px; /* 🎛️ コンテナ幅変更可能 */
  margin: 0 auto;
  padding: 2rem; /* 🎛️ 余白調整可能 */
}

.accordion {
  border-bottom: 1px solid #e5e7eb; /* 🎨 境界線色変更可能 */

  &:first-child {
    border-top: 1px solid #e5e7eb; /* 🎨 上境界線色変更可能 */
  }

  /* summary要素のスタイル */
  &__summary {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.5rem 0; /* 🎛️ パディング調整可能 */
    cursor: pointer;
    list-style: none;
    font-weight: 600; /* 🎨 フォント太さ変更可能 */
    font-size: 1.1rem; /* 🎨 フォントサイズ変更可能 */
    color: #374151; /* 🎨 テキスト色変更可能 */
    transition: color 0.2s ease; /* ⏱️ ホバー速度調整可能 */

    /* ブラウザデフォルトの三角マークを非表示 */
    &::-webkit-details-marker,
    &::marker {
      display: none;
    }

    &:hover {
      color: #1f2937; /* 🎨 ホバー色変更可能 */
    }

    &:focus {
      outline: 2px solid #3b82f6; /* 🎨 フォーカス色変更可能 */
      outline-offset: 2px;
    }
  }

  /* タイトル部分 */
  &__title {
    flex: 1;
  }

  /* アイコン部分 */
  &__icon {
    width: 24px; /* 🎛️ アイコンサイズ変更可能 */
    height: 24px; /* 🎛️ アイコンサイズ変更可能 */
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem; /* 🎨 アイコン文字サイズ変更可能 */
    font-weight: bold;
    color: #6b7280; /* 🎨 アイコン色変更可能 */
    transition: transform 0.3s ease, color 0.2s ease; /* ⏱️ 回転速度調整可能 */
    flex-shrink: 0;
  }

  /* コンテンツ部分 */
  &__content {
    display: grid;
    grid-template-rows: 0fr;
    transition: grid-template-rows 0.3s ease; /* ⏱️ 開くアニメーション速度変更可能 */
    overflow: hidden;
  }

  &__content-inner {
    min-height: 0;
    padding: 0;
    color: #6b7280; /* 🎨 コンテンツ文字色変更可能 */
    line-height: 1.6; /* 🎛️ 行間調整可能 */

    /* paddingのアニメーション */
    transition: padding 0.3s ease-out; /* ⏱️ パディングアニメーション速度変更可能 */

    p {
      margin: 0;
    }
  }

  /* 開いている状態 */
  &[open] {
    .accordion__content {
      grid-template-rows: 1fr;
    }

    .accordion__content-inner {
      padding: 1rem 0 1.5rem 0; /* 🎛️ 開いた時のパディング調整可能 */
    }

    .accordion__icon {
      transform: rotate(45deg) !important; /* 🎯 回転角度変更可能: 45deg, 90deg, 180deg など */
      color: #374151 !important; /* 🎨 開いた時のアイコン色変更可能 */
    }
  }

  /* 閉じるアニメーション用クラス */
  &.is-closing {
    .accordion__content {
      grid-template-rows: 0fr;
      transition: grid-template-rows 0.3s ease-out; /* ⏱️ 閉じるアニメーション速度変更可能 */
    }

    .accordion__content-inner {
      padding: 0;
      opacity: 0.2; /* 🎛️ 閉じる時の透明度変更可能 */
      transform: translateY(-15px) scale(0.98); /* 🎯 閉じる時の移動・縮小効果変更可能 */
      transition: opacity 0.3s ease-out, transform 0.3s ease-out, padding 0.3s ease-out; /* ⏱️ 各効果の速度調整可能 */
    }

    .accordion__summary {
      background-color: rgba(59, 130, 246, 0.15); /* 🎨 閉じる時の背景色変更可能 */
      border-left: 3px solid #3b82f6; /* 🎨 閉じる時の左線色・太さ変更可能 */
      transition: background-color 0.3s ease-out, border-left 0.3s ease-out; /* ⏱️ 背景・線の速度調整可能 */
    }

    .accordion__icon {
      transform: rotate(0deg) !important; /* 🎯 閉じる時の回転角度（通常は0deg） */
      transition: transform 0.3s ease-out, opacity 0.3s ease-out, color 0.3s ease-out; /* ⏱️ アイコン変化速度調整可能 */
    }
  }

  /* アニメーション中の状態 */
  &.is-animating {
    .accordion__summary {
      pointer-events: none; /* アニメーション中はクリック無効 */
    }
  }
```

```js
// ===============================================
// アコーディオン
// ===============================================

document.addEventListener("DOMContentLoaded", function () {
  // 🎛️ アニメーション時間設定（ミリ秒）
  const animationDuration = 300; // 変更可能

  // 🎯 対象要素のセレクタ（変更可能）
  const accordionElements = document.querySelectorAll(".accordion");

  // 🔄 NodeListを配列に変換（Autoptimizeプラグイン対策）
  const accordionArray = Array.from(accordionElements);

  // 各アコーディオンにイベントリスナーを設定
  accordionArray.forEach((accordion) => {
    const summary = accordion.querySelector(".accordion__summary");

    // クリックイベントのリスナーを設定
    summary.addEventListener("click", (e) => {
      // ブラウザ標準の開閉動作を一旦キャンセル
      e.preventDefault();

      // アニメーション中の場合は処理をスキップ
      if (accordion.classList.contains("is-animating")) {
        return;
      }

      // 現在の状態を確認
      const isCurrentlyOpen = accordion.open;

      if (isCurrentlyOpen) {
        // 閉じる処理
        closeAccordion(accordion);
      } else {
        // 排他制御: まず他の開いているアコーディオンを閉じる
        const openAccordions = [];
        accordionArray.forEach((otherAccordion) => {
          if (otherAccordion !== accordion && otherAccordion.open) {
            openAccordions.push(otherAccordion);
          }
        });

        if (openAccordions.length > 0) {
          // 他のアコーディオンを完全同時に閉じる
          openAccordions.forEach((otherAccordion) => {
            closeAccordion(otherAccordion);
          });

          // 🎛️ 閉じるアニメーション完了後の遅延時間調整可能
          setTimeout(() => {
            openAccordion(accordion);
          }, animationDuration + 50); // +50msの余裕時間（調整可能）
        } else {
          // 他に開いているものがない場合はすぐに開く
          openAccordion(accordion);
        }
      }
    });
  });

  /**
   * アコーディオンを閉じる
   */
  function closeAccordion(accordion) {
    if (!accordion.open || accordion.classList.contains("is-animating")) {
      return;
    }

    // アニメーション中フラグを設定
    accordion.classList.add("is-animating");

    // 🎨 閉じるアニメーション用のクラスを追加（CSS連携）
    accordion.classList.add("is-closing");

    // CSS Transitionでアニメーション
    setTimeout(() => {
      accordion.removeAttribute("open");
      accordion.classList.remove("is-closing");
      accordion.classList.remove("is-animating");
    }, animationDuration); // 🎛️ ここでアニメーション時間を使用
  }

  /**
   * アコーディオンを開く（CSS Transition版）
   * @param {HTMLElement} accordion - 開く対象の <details> 要素
   */
  function openAccordion(accordion) {
    if (accordion.open || accordion.classList.contains("is-animating")) {
      return;
    }

    // アニメーション中フラグを設定
    accordion.classList.add("is-animating");

    // open 属性を追加
    accordion.setAttribute("open", "");

    // 🎨 閉じるアニメーション用のクラスを削除
    accordion.classList.remove("is-closing");

    // CSS Transitionでアニメーション
    setTimeout(() => {
      accordion.classList.remove("is-animating");
    }, animationDuration); // 🎛️ ここでアニメーション時間を使用
  }
});
```

## 注意点
