# ページネーションの設置

タイプ: スニペット

## 利用シーン（あれば画像）

- ページネーションを、PHPで記述する。

## やること

1. `WP_Query`に、`$paged` を追加。
    
    ```php
    <?php
    $paged = (get_query_var('paged')) ? get_query_var('paged') : 1; // これと
    $args = array(
        'post_type' => '{投稿タイプの名前}',
        'posts_per_page' => {表示したい件数},
        'orderby' => 'date',
        'order' => 'DESC',
        'paged' => $paged // これ
    );
    
    $query = new WP_Query($args);
    ?>
    ```
    
2. `endwhile` の直下に、ページネーションを設置
    
    ```php
    <div class="pagination">
        <?php
        $big = 999999999;
        echo paginate_links(array(
            'base' => str_replace($big, '%#%', esc_url(get_pagenum_link($big))),
            'format' => '/page/%#%',
            'current' => max(1, get_query_var('paged')),
            'total' => $query->max_num_pages,
            'prev_text' => __('←'),
            'next_text' => __('→'),
        ));
        ?>
    </div>
    ```
    
3. 管理画面の、表示設定を調整。管理画面の最大表示件数が実際の投稿件数を上回っていると、ページ送りが不要と判断されてしまう。